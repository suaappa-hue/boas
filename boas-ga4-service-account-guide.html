<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BOAS GA4 서비스 계정 설정 가이드</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#009CA0',
                        'primary-dark': '#007B7E',
                    }
                }
            }
        }
    </script>
    <style>
        .checkbox-wrapper input[type="checkbox"]:checked + label::before {
            background-color: #009CA0;
            border-color: #009CA0;
        }
        .code-block {
            background: #1e293b;
            border: 1px solid #334155;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 min-h-screen">
    <div class="max-w-4xl mx-auto px-6 py-12">
        <!-- Header -->
        <div class="mb-12">
            <h1 class="text-4xl font-bold mb-4 text-primary">BOAS GA4 서비스 계정 설정 가이드</h1>
            <p class="text-gray-400 text-lg">Google Analytics 4 Data API 및 Search Console API 접근을 위한 서비스 계정 설정</p>
        </div>

        <!-- Project Info -->
        <div class="bg-gray-800 rounded-lg p-6 mb-8 border border-gray-700">
            <h2 class="text-xl font-semibold mb-4 text-primary">📋 프로젝트 정보</h2>
            <div class="space-y-2 text-sm font-mono">
                <div class="flex justify-between items-center">
                    <span class="text-gray-400">GA4 Property ID:</span>
                    <div class="flex items-center gap-2">
                        <code class="text-primary">524671234</code>
                        <button onclick="copyToClipboard('524671234')" class="px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded text-xs transition">복사</button>
                    </div>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-gray-400">GA4 Measurement ID:</span>
                    <div class="flex items-center gap-2">
                        <code class="text-primary">G-VMSD6SR1KW</code>
                        <button onclick="copyToClipboard('G-VMSD6SR1KW')" class="px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded text-xs transition">복사</button>
                    </div>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-gray-400">도메인:</span>
                    <div class="flex items-center gap-2">
                        <code class="text-primary">www.boas-solution.kr</code>
                        <button onclick="copyToClipboard('www.boas-solution.kr')" class="px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded text-xs transition">복사</button>
                    </div>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-gray-400">Vercel Project:</span>
                    <code class="text-primary">boas (team: boas-projects-6887cded)</code>
                </div>
            </div>
        </div>

        <!-- Step 1 -->
        <div class="mb-8">
            <div class="flex items-start gap-4 mb-4">
                <input type="checkbox" id="step1" class="mt-1.5 h-5 w-5 rounded border-gray-600 text-primary focus:ring-primary focus:ring-offset-gray-900">
                <div class="flex-1">
                    <label for="step1" class="cursor-pointer">
                        <h3 class="text-2xl font-bold mb-3 text-white">1. GCP 프로젝트 생성/선택</h3>
                    </label>
                    <div class="space-y-3">
                        <p class="text-gray-300">Google Cloud Console에서 프로젝트를 생성하거나 기존 프로젝트를 선택합니다.</p>
                        <div class="bg-gray-800 rounded-lg p-4 border border-gray-700">
                            <p class="text-sm mb-2 text-gray-400">권장 프로젝트 이름:</p>
                            <div class="flex items-center gap-2">
                                <code class="text-primary font-mono">boas-analytics</code>
                                <button onclick="copyToClipboard('boas-analytics')" class="px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded text-xs transition">복사</button>
                            </div>
                        </div>
                        <a href="https://console.cloud.google.com/projectcreate" target="_blank" class="inline-block px-6 py-3 bg-primary hover:bg-primary-dark text-white rounded-lg transition font-semibold">
                            Google Cloud Console 열기 →
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 2 -->
        <div class="mb-8">
            <div class="flex items-start gap-4 mb-4">
                <input type="checkbox" id="step2" class="mt-1.5 h-5 w-5 rounded border-gray-600 text-primary focus:ring-primary focus:ring-offset-gray-900">
                <div class="flex-1">
                    <label for="step2" class="cursor-pointer">
                        <h3 class="text-2xl font-bold mb-3 text-white">2. API 활성화</h3>
                    </label>
                    <div class="space-y-4">
                        <p class="text-gray-300">다음 두 가지 API를 활성화해야 합니다.</p>

                        <!-- GA4 Data API -->
                        <div class="bg-gray-800 rounded-lg p-4 border border-gray-700">
                            <div class="flex items-start gap-3 mb-3">
                                <input type="checkbox" id="step2a" class="mt-1 h-4 w-4 rounded border-gray-600 text-primary focus:ring-primary focus:ring-offset-gray-900">
                                <label for="step2a" class="cursor-pointer">
                                    <h4 class="font-semibold text-white">Google Analytics Data API (v1beta)</h4>
                                    <p class="text-sm text-gray-400 mt-1">GA4 데이터 조회를 위한 API</p>
                                </label>
                            </div>
                            <a href="https://console.cloud.google.com/apis/library/analyticsdata.googleapis.com" target="_blank" class="inline-block px-4 py-2 bg-primary hover:bg-primary-dark text-white rounded transition text-sm font-semibold">
                                API 활성화하기 →
                            </a>
                        </div>

                        <!-- Search Console API -->
                        <div class="bg-gray-800 rounded-lg p-4 border border-gray-700">
                            <div class="flex items-start gap-3 mb-3">
                                <input type="checkbox" id="step2b" class="mt-1 h-4 w-4 rounded border-gray-600 text-primary focus:ring-primary focus:ring-offset-gray-900">
                                <label for="step2b" class="cursor-pointer">
                                    <h4 class="font-semibold text-white">Google Search Console API</h4>
                                    <p class="text-sm text-gray-400 mt-1">검색어 및 검색 성능 데이터 조회를 위한 API</p>
                                </label>
                            </div>
                            <a href="https://console.cloud.google.com/apis/library/searchconsole.googleapis.com" target="_blank" class="inline-block px-4 py-2 bg-primary hover:bg-primary-dark text-white rounded transition text-sm font-semibold">
                                API 활성화하기 →
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 3 -->
        <div class="mb-8">
            <div class="flex items-start gap-4 mb-4">
                <input type="checkbox" id="step3" class="mt-1.5 h-5 w-5 rounded border-gray-600 text-primary focus:ring-primary focus:ring-offset-gray-900">
                <div class="flex-1">
                    <label for="step3" class="cursor-pointer">
                        <h3 class="text-2xl font-bold mb-3 text-white">3. 서비스 계정 생성</h3>
                    </label>
                    <div class="space-y-4">
                        <p class="text-gray-300">서비스 계정을 생성하고 JSON 키를 다운로드합니다.</p>

                        <div class="bg-gray-800 rounded-lg p-4 border border-gray-700 space-y-3">
                            <div>
                                <p class="text-sm text-gray-400 mb-2">1. IAM & Admin > Service Accounts로 이동</p>
                                <a href="https://console.cloud.google.com/iam-admin/serviceaccounts" target="_blank" class="inline-block px-4 py-2 bg-primary hover:bg-primary-dark text-white rounded transition text-sm font-semibold">
                                    Service Accounts 페이지 열기 →
                                </a>
                            </div>

                            <div>
                                <p class="text-sm text-gray-400 mb-2">2. "Create Service Account" 클릭</p>
                            </div>

                            <div>
                                <p class="text-sm text-gray-400 mb-2">3. 서비스 계정 이름:</p>
                                <div class="flex items-center gap-2">
                                    <code class="text-primary font-mono">boas-ga4-reader</code>
                                    <button onclick="copyToClipboard('boas-ga4-reader')" class="px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded text-xs transition">복사</button>
                                </div>
                            </div>

                            <div>
                                <p class="text-sm text-gray-400 mb-2">4. 설명 (선택):</p>
                                <div class="flex items-center gap-2">
                                    <code class="text-gray-300 font-mono text-sm">Service account for GA4 and Search Console API access</code>
                                    <button onclick="copyToClipboard('Service account for GA4 and Search Console API access')" class="px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded text-xs transition">복사</button>
                                </div>
                            </div>

                            <div>
                                <p class="text-sm text-gray-400 mb-2">5. "Create and Continue" 클릭 후 역할 선택은 건너뛰기 (Skip)</p>
                            </div>

                            <div>
                                <p class="text-sm text-gray-400 mb-2">6. "Done" 클릭하여 서비스 계정 생성 완료</p>
                            </div>

                            <div class="border-t border-gray-700 pt-3 mt-3">
                                <p class="text-sm text-gray-400 mb-2">7. 생성된 서비스 계정 클릭 > "Keys" 탭 > "Add Key" > "Create new key"</p>
                            </div>

                            <div>
                                <p class="text-sm text-gray-400 mb-2">8. Key type: <strong class="text-white">JSON</strong> 선택 후 "Create"</p>
                            </div>

                            <div class="bg-yellow-900/30 border border-yellow-700 rounded p-3">
                                <p class="text-yellow-400 text-sm font-semibold">⚠️ 중요: 다운로드된 JSON 파일을 안전하게 보관하세요!</p>
                                <p class="text-yellow-300 text-xs mt-1">이 파일은 다시 다운로드할 수 없으며, 서비스 계정 이메일과 Private Key가 포함되어 있습니다.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 4 -->
        <div class="mb-8">
            <div class="flex items-start gap-4 mb-4">
                <input type="checkbox" id="step4" class="mt-1.5 h-5 w-5 rounded border-gray-600 text-primary focus:ring-primary focus:ring-offset-gray-900">
                <div class="flex-1">
                    <label for="step4" class="cursor-pointer">
                        <h3 class="text-2xl font-bold mb-3 text-white">4. GA4 속성에 서비스 계정 추가</h3>
                    </label>
                    <div class="space-y-4">
                        <p class="text-gray-300">서비스 계정을 GA4 속성에 "뷰어" 권한으로 추가합니다.</p>

                        <div class="bg-gray-800 rounded-lg p-4 border border-gray-700 space-y-3">
                            <div>
                                <p class="text-sm text-gray-400 mb-2">1. Google Analytics 관리자 페이지로 이동</p>
                                <a href="https://analytics.google.com/analytics/web/#/a277909532p524671234/admin/property-user-management" target="_blank" class="inline-block px-4 py-2 bg-primary hover:bg-primary-dark text-white rounded transition text-sm font-semibold">
                                    GA4 Property Access Management 열기 →
                                </a>
                            </div>

                            <div>
                                <p class="text-sm text-gray-400 mb-2">2. 우측 상단 "+" 버튼 클릭 > "사용자 추가"</p>
                            </div>

                            <div>
                                <p class="text-sm text-gray-400 mb-2">3. 이메일 주소에 서비스 계정 이메일 입력</p>
                                <p class="text-xs text-gray-500 mt-1">형식: <code class="text-gray-400">boas-ga4-reader@[PROJECT-ID].iam.gserviceaccount.com</code></p>
                                <p class="text-xs text-gray-500 mt-1">JSON 파일의 <code class="text-gray-400">client_email</code> 필드에서 확인 가능</p>
                            </div>

                            <div>
                                <p class="text-sm text-gray-400 mb-2">4. 역할 선택: <strong class="text-white">뷰어 (Viewer)</strong></p>
                            </div>

                            <div>
                                <p class="text-sm text-gray-400 mb-2">5. "추가" 버튼 클릭</p>
                            </div>

                            <div class="bg-blue-900/30 border border-blue-700 rounded p-3">
                                <p class="text-blue-400 text-sm font-semibold">💡 확인:</p>
                                <p class="text-blue-300 text-xs mt-1">Property ID가 <code class="text-blue-200">524671234</code>인지 확인하세요.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 5 -->
        <div class="mb-8">
            <div class="flex items-start gap-4 mb-4">
                <input type="checkbox" id="step5" class="mt-1.5 h-5 w-5 rounded border-gray-600 text-primary focus:ring-primary focus:ring-offset-gray-900">
                <div class="flex-1">
                    <label for="step5" class="cursor-pointer">
                        <h3 class="text-2xl font-bold mb-3 text-white">5. Search Console에 서비스 계정 추가</h3>
                    </label>
                    <div class="space-y-4">
                        <p class="text-gray-300">서비스 계정을 Search Console 속성에 "전체" 권한으로 추가합니다.</p>

                        <div class="bg-gray-800 rounded-lg p-4 border border-gray-700 space-y-3">
                            <div>
                                <p class="text-sm text-gray-400 mb-2">1. Google Search Console로 이동</p>
                                <a href="https://search.google.com/search-console" target="_blank" class="inline-block px-4 py-2 bg-primary hover:bg-primary-dark text-white rounded transition text-sm font-semibold">
                                    Search Console 열기 →
                                </a>
                            </div>

                            <div>
                                <p class="text-sm text-gray-400 mb-2">2. 속성 선택 (없으면 추가):</p>
                                <div class="flex items-center gap-2">
                                    <code class="text-primary font-mono">https://www.boas-solution.kr</code>
                                    <button onclick="copyToClipboard('https://www.boas-solution.kr')" class="px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded text-xs transition">복사</button>
                                </div>
                            </div>

                            <div>
                                <p class="text-sm text-gray-400 mb-2">3. 좌측 메뉴 "설정" > "사용자 및 권한" 클릭</p>
                            </div>

                            <div>
                                <p class="text-sm text-gray-400 mb-2">4. "사용자 추가" 버튼 클릭</p>
                            </div>

                            <div>
                                <p class="text-sm text-gray-400 mb-2">5. 이메일 주소에 서비스 계정 이메일 입력</p>
                                <p class="text-xs text-gray-500 mt-1">형식: <code class="text-gray-400">boas-ga4-reader@[PROJECT-ID].iam.gserviceaccount.com</code></p>
                            </div>

                            <div>
                                <p class="text-sm text-gray-400 mb-2">6. 권한 선택: <strong class="text-white">전체 (Full)</strong></p>
                            </div>

                            <div>
                                <p class="text-sm text-gray-400 mb-2">7. "추가" 버튼 클릭</p>
                            </div>

                            <div class="bg-blue-900/30 border border-blue-700 rounded p-3">
                                <p class="text-blue-400 text-sm font-semibold">💡 팁:</p>
                                <p class="text-blue-300 text-xs mt-1">Search Console에서 데이터를 수집하려면 최소 1-2일의 데이터가 필요합니다.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 6 -->
        <div class="mb-8">
            <div class="flex items-start gap-4 mb-4">
                <input type="checkbox" id="step6" class="mt-1.5 h-5 w-5 rounded border-gray-600 text-primary focus:ring-primary focus:ring-offset-gray-900">
                <div class="flex-1">
                    <label for="step6" class="cursor-pointer">
                        <h3 class="text-2xl font-bold mb-3 text-white">6. Vercel 환경변수 설정</h3>
                    </label>
                    <div class="space-y-4">
                        <p class="text-gray-300">다운로드한 JSON 키 파일의 정보를 Vercel 환경변수로 설정합니다.</p>

                        <div class="bg-red-900/30 border border-red-700 rounded p-4 mb-4">
                            <p class="text-red-400 text-sm font-semibold">🚨 중요: GOOGLE_PRIVATE_KEY 설정 주의사항</p>
                            <p class="text-red-300 text-xs mt-2">Private key에 포함된 <code class="text-red-200">\n</code> 문자를 반드시 유지해야 합니다!</p>
                            <p class="text-red-300 text-xs mt-1">CLI로 설정 시 <code class="text-red-200">echo</code> 대신 <code class="text-red-200 font-semibold">printf</code>를 사용하세요.</p>
                        </div>

                        <!-- GOOGLE_SERVICE_ACCOUNT_EMAIL -->
                        <div class="bg-gray-800 rounded-lg p-4 border border-gray-700">
                            <div class="flex items-center justify-between mb-2">
                                <code class="text-primary font-mono font-semibold">GOOGLE_SERVICE_ACCOUNT_EMAIL</code>
                                <button onclick="copyToClipboard('GOOGLE_SERVICE_ACCOUNT_EMAIL')" class="px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded text-xs transition">복사</button>
                            </div>
                            <p class="text-sm text-gray-400 mb-2">JSON 파일의 <code class="text-gray-300">client_email</code> 값</p>
                            <p class="text-xs text-gray-500">예: boas-ga4-reader@boas-analytics-123456.iam.gserviceaccount.com</p>
                        </div>

                        <!-- GOOGLE_PRIVATE_KEY -->
                        <div class="bg-gray-800 rounded-lg p-4 border border-gray-700">
                            <div class="flex items-center justify-between mb-2">
                                <code class="text-primary font-mono font-semibold">GOOGLE_PRIVATE_KEY</code>
                                <button onclick="copyToClipboard('GOOGLE_PRIVATE_KEY')" class="px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded text-xs transition">복사</button>
                            </div>
                            <p class="text-sm text-gray-400 mb-2">JSON 파일의 <code class="text-gray-300">private_key</code> 값 (전체 문자열)</p>
                            <p class="text-xs text-gray-500 mb-3">예: -----BEGIN PRIVATE KEY-----\nMIIE....\n-----END PRIVATE KEY-----\n</p>

                            <div class="mt-3 p-3 bg-gray-900 rounded">
                                <p class="text-xs text-gray-400 mb-2">CLI로 설정할 경우 (권장):</p>
                                <div class="code-block rounded p-3 relative">
                                    <pre class="text-xs text-gray-300 overflow-x-auto"><code>printf "GOOGLE_PRIVATE_KEY=%s\n" "$(cat service-account-key.json | jq -r .private_key)" >> .env.local</code></pre>
                                    <button onclick="copyToClipboard('printf \"GOOGLE_PRIVATE_KEY=%s\\n\" \"$(cat service-account-key.json | jq -r .private_key)\" >> .env.local')" class="absolute top-2 right-2 px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded text-xs transition">복사</button>
                                </div>
                            </div>

                            <div class="mt-3 p-3 bg-gray-900 rounded">
                                <p class="text-xs text-gray-400 mb-2">Vercel CLI로 설정:</p>
                                <div class="code-block rounded p-3 relative">
                                    <pre class="text-xs text-gray-300 overflow-x-auto"><code>vercel env add GOOGLE_PRIVATE_KEY production
# 그 다음 private_key 값을 붙여넣기 (Ctrl+V)</code></pre>
                                    <button onclick="copyToClipboard('vercel env add GOOGLE_PRIVATE_KEY production')" class="absolute top-2 right-2 px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded text-xs transition">복사</button>
                                </div>
                            </div>
                        </div>

                        <!-- GA4_PROPERTY_ID -->
                        <div class="bg-gray-800 rounded-lg p-4 border border-gray-700">
                            <div class="flex items-center justify-between mb-2">
                                <code class="text-primary font-mono font-semibold">GA4_PROPERTY_ID</code>
                                <button onclick="copyToClipboard('GA4_PROPERTY_ID')" class="px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded text-xs transition">복사</button>
                            </div>
                            <div class="flex items-center gap-2 mt-2">
                                <code class="text-green-400 font-mono">524671234</code>
                                <button onclick="copyToClipboard('524671234')" class="px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded text-xs transition">복사</button>
                            </div>
                        </div>

                        <!-- SEARCH_CONSOLE_SITE_URL -->
                        <div class="bg-gray-800 rounded-lg p-4 border border-gray-700">
                            <div class="flex items-center justify-between mb-2">
                                <code class="text-primary font-mono font-semibold">SEARCH_CONSOLE_SITE_URL</code>
                                <button onclick="copyToClipboard('SEARCH_CONSOLE_SITE_URL')" class="px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded text-xs transition">복사</button>
                            </div>
                            <div class="flex items-center gap-2 mt-2">
                                <code class="text-green-400 font-mono">https://www.boas-solution.kr</code>
                                <button onclick="copyToClipboard('https://www.boas-solution.kr')" class="px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded text-xs transition">복사</button>
                            </div>
                        </div>

                        <div class="mt-4">
                            <a href="https://vercel.com/boas-projects-6887cded/boas/settings/environment-variables" target="_blank" class="inline-block px-6 py-3 bg-primary hover:bg-primary-dark text-white rounded-lg transition font-semibold">
                                Vercel 환경변수 페이지 열기 →
                            </a>
                        </div>

                        <div class="bg-blue-900/30 border border-blue-700 rounded p-4 mt-4">
                            <p class="text-blue-400 text-sm font-semibold">💡 팁:</p>
                            <p class="text-blue-300 text-xs mt-2">환경변수 설정 후 반드시 Vercel 프로젝트를 재배포해야 적용됩니다.</p>
                            <p class="text-blue-300 text-xs mt-1">Settings > Deployments > 최근 배포 > "Redeploy" 클릭</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 7 -->
        <div class="mb-8">
            <div class="flex items-start gap-4 mb-4">
                <input type="checkbox" id="step7" class="mt-1.5 h-5 w-5 rounded border-gray-600 text-primary focus:ring-primary focus:ring-offset-gray-900">
                <div class="flex-1">
                    <label for="step7" class="cursor-pointer">
                        <h3 class="text-2xl font-bold mb-3 text-white">7. 검증</h3>
                    </label>
                    <div class="space-y-4">
                        <p class="text-gray-300">설정이 완료되었는지 확인합니다.</p>

                        <div class="bg-gray-800 rounded-lg p-4 border border-gray-700 space-y-3">
                            <div class="flex items-start gap-3">
                                <input type="checkbox" id="step7a" class="mt-1 h-4 w-4 rounded border-gray-600 text-primary focus:ring-primary focus:ring-offset-gray-900">
                                <label for="step7a" class="cursor-pointer">
                                    <h4 class="font-semibold text-white">GA4 연결 확인</h4>
                                    <p class="text-sm text-gray-400 mt-1">대시보드 Analytics 페이지에서 GA4 데이터가 정상적으로 로드되는지 확인</p>
                                    <a href="https://www.boas-solution.kr/dashboard/analytics" target="_blank" class="inline-block mt-2 px-4 py-2 bg-primary hover:bg-primary-dark text-white rounded transition text-sm font-semibold">
                                        /dashboard/analytics 확인 →
                                    </a>
                                </label>
                            </div>

                            <div class="flex items-start gap-3">
                                <input type="checkbox" id="step7b" class="mt-1 h-4 w-4 rounded border-gray-600 text-primary focus:ring-primary focus:ring-offset-gray-900">
                                <label for="step7b" class="cursor-pointer">
                                    <h4 class="font-semibold text-white">Search Console 연결 확인</h4>
                                    <p class="text-sm text-gray-400 mt-1">대시보드 Analytics > 검색어 탭에서 Search Console 데이터가 정상적으로 로드되는지 확인</p>
                                    <a href="https://www.boas-solution.kr/dashboard/analytics" target="_blank" class="inline-block mt-2 px-4 py-2 bg-primary hover:bg-primary-dark text-white rounded transition text-sm font-semibold">
                                        검색어 탭 확인 →
                                    </a>
                                </label>
                            </div>
                        </div>

                        <div class="bg-green-900/30 border border-green-700 rounded p-4">
                            <p class="text-green-400 text-sm font-semibold">✅ 설정 완료!</p>
                            <p class="text-green-300 text-xs mt-2">모든 단계를 완료했다면 GA4 Data API 및 Search Console API 연동이 정상적으로 작동합니다.</p>
                            <p class="text-green-300 text-xs mt-1">데이터가 표시되지 않는다면 Vercel 로그를 확인하여 오류 메시지를 확인하세요.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Troubleshooting -->
        <div class="mb-12 bg-gray-800 rounded-lg p-6 border border-gray-700">
            <h2 class="text-2xl font-bold mb-4 text-yellow-400">🔧 문제 해결</h2>

            <div class="space-y-4">
                <div class="border-l-4 border-yellow-500 pl-4">
                    <h4 class="font-semibold text-white mb-1">인증 오류 (401 Unauthorized)</h4>
                    <p class="text-sm text-gray-300">GOOGLE_PRIVATE_KEY의 줄바꿈 문자가 제대로 유지되지 않은 경우</p>
                    <p class="text-xs text-gray-400 mt-1">→ printf를 사용하여 환경변수를 다시 설정하거나, Vercel UI에서 직접 붙여넣기</p>
                </div>

                <div class="border-l-4 border-yellow-500 pl-4">
                    <h4 class="font-semibold text-white mb-1">403 Forbidden (GA4)</h4>
                    <p class="text-sm text-gray-300">서비스 계정이 GA4 속성에 추가되지 않았거나 권한이 부족한 경우</p>
                    <p class="text-xs text-gray-400 mt-1">→ GA4 Property Access Management에서 서비스 계정 이메일이 "뷰어" 권한으로 추가되었는지 확인</p>
                </div>

                <div class="border-l-4 border-yellow-500 pl-4">
                    <h4 class="font-semibold text-white mb-1">403 Forbidden (Search Console)</h4>
                    <p class="text-sm text-gray-300">서비스 계정이 Search Console 속성에 추가되지 않았거나 권한이 부족한 경우</p>
                    <p class="text-xs text-gray-400 mt-1">→ Search Console 설정 > 사용자 및 권한에서 서비스 계정 이메일이 "전체" 권한으로 추가되었는지 확인</p>
                </div>

                <div class="border-l-4 border-yellow-500 pl-4">
                    <h4 class="font-semibold text-white mb-1">데이터가 표시되지 않음</h4>
                    <p class="text-sm text-gray-300">환경변수 변경 후 재배포를 하지 않은 경우</p>
                    <p class="text-xs text-gray-400 mt-1">→ Vercel에서 프로젝트 재배포 (Redeploy) 실행</p>
                </div>

                <div class="border-l-4 border-yellow-500 pl-4">
                    <h4 class="font-semibold text-white mb-1">API가 활성화되지 않음 오류</h4>
                    <p class="text-sm text-gray-300">Google Analytics Data API 또는 Search Console API가 활성화되지 않은 경우</p>
                    <p class="text-xs text-gray-400 mt-1">→ GCP Console에서 해당 API를 활성화하고 몇 분 후 재시도</p>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="text-center text-gray-500 text-sm mt-12 pb-8">
            <p>BOAS 경영지원솔루션 | www.boas-solution.kr</p>
            <p class="mt-2">이 가이드는 GA4 Data API 및 Search Console API 연동을 위한 설정 문서입니다.</p>
        </div>
    </div>

    <script>
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                // Show temporary success message
                const button = event.target;
                const originalText = button.textContent;
                button.textContent = '✓';
                button.classList.add('bg-green-600');
                setTimeout(() => {
                    button.textContent = originalText;
                    button.classList.remove('bg-green-600');
                }, 1500);
            }).catch(err => {
                console.error('Failed to copy:', err);
                alert('복사 실패. 수동으로 복사해주세요.');
            });
        }

        // Save checkbox states to localStorage
        document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
            // Load saved state
            const savedState = localStorage.getItem(checkbox.id);
            if (savedState === 'true') {
                checkbox.checked = true;
            }

            // Save state on change
            checkbox.addEventListener('change', () => {
                localStorage.setItem(checkbox.id, checkbox.checked);
            });
        });
    </script>
</body>
</html>
